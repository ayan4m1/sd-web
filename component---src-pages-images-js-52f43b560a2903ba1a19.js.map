{"version":3,"file":"component---src-pages-images-js-52f43b560a2903ba1a19.js","mappings":"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","sources":["webpack://sd-web/./node_modules/react-bootstrap/esm/Button.js","webpack://sd-web/./src/pages/images.js","webpack://sd-web/./src/utils/index.js"],"sourcesContent":["import _defineProperty from \"H:/sd-web/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"H:/sd-web/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _objectWithoutProperties from \"H:/sd-web/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nvar _excluded = [\"as\", \"bsPrefix\", \"variant\", \"size\", \"active\", \"className\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport classNames from 'classnames';\nimport * as React from 'react';\nimport { useButtonProps } from '@restart/ui/Button';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar defaultProps = {\n  variant: 'primary',\n  active: false,\n  disabled: false\n};\nvar Button = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var as = _ref.as,\n      bsPrefix = _ref.bsPrefix,\n      variant = _ref.variant,\n      size = _ref.size,\n      active = _ref.active,\n      className = _ref.className,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'btn');\n\n  var _useButtonProps = useButtonProps(_objectSpread({\n    tagName: as\n  }, props)),\n      _useButtonProps2 = _slicedToArray(_useButtonProps, 2),\n      buttonProps = _useButtonProps2[0],\n      tagName = _useButtonProps2[1].tagName;\n\n  var Component = tagName;\n  return /*#__PURE__*/_jsx(Component, _objectSpread(_objectSpread(_objectSpread({}, buttonProps), props), {}, {\n    ref: ref,\n    className: classNames(className, prefix, active && 'active', variant && \"\".concat(prefix, \"-\").concat(variant), size && \"\".concat(prefix, \"-\").concat(size), props.href && props.disabled && 'disabled')\n  }));\n});\nButton.displayName = 'Button';\nButton.defaultProps = defaultProps;\nexport default Button;","import { formatDistanceToNow, parseISO } from 'date-fns';\r\nimport { graphql, Link } from 'gatsby';\r\nimport { GatsbyImage, getImage } from 'gatsby-plugin-image';\r\nimport PropTypes from 'prop-types';\r\nimport { Container, Row, Col, Table, Button } from 'react-bootstrap';\r\n\r\nimport Layout from 'components/layout';\r\nimport SEO from 'components/seo';\r\nimport { getImageUrl } from 'utils';\r\n\r\nexport default function ImagesPage({ data }) {\r\n  const {\r\n    postgres: {\r\n      allImageBoosts: { nodes: boosts }\r\n    },\r\n    allFile: { nodes: images }\r\n  } = data;\r\n\r\n  const findImage = (uuid) =>\r\n    uuid\r\n      ? getImage(\r\n          images.find((image) => image.relativePath === `${uuid}.png`)\r\n            ?.childImageSharp?.gatsbyImageData\r\n        )\r\n      : {};\r\n\r\n  const filteredBoosts = boosts.filter((boost) => Boolean(boost.paid));\r\n\r\n  return (\r\n    <Layout>\r\n      <SEO title=\"Images\" description=\"Browse images\" />\r\n      <Container>\r\n        <Row>\r\n          <Col xs={12}>\r\n            <h1>Images</h1>\r\n            <Table striped>\r\n              <thead>\r\n                <tr>\r\n                  <th>Thumbnail</th>\r\n                  <th>Prompt</th>\r\n                  <th>Created</th>\r\n                  <th>View</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {filteredBoosts.length ? (\r\n                  filteredBoosts.map((boost) => (\r\n                    <tr key={boost.uuid}>\r\n                      <td>\r\n                        <GatsbyImage image={findImage(boost.uuid)} />\r\n                      </td>\r\n                      <td>\r\n                        {\r\n                          boost.imageResultByImageResultId\r\n                            .imageRequestByImageRequestId.prompt\r\n                        }\r\n                      </td>\r\n                      <td>\r\n                        {formatDistanceToNow(\r\n                          parseISO(boost.imageResultByImageResultId.created),\r\n                          { addSuffix: true }\r\n                        )}\r\n                      </td>\r\n                      <td>\r\n                        <Link to={getImageUrl(boost)}>\r\n                          <Button variant=\"primary\">View</Button>\r\n                        </Link>\r\n                      </td>\r\n                    </tr>\r\n                  ))\r\n                ) : (\r\n                  <tr>\r\n                    <td colSpan={4}>No images to display.</td>\r\n                  </tr>\r\n                )}\r\n              </tbody>\r\n            </Table>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nImagesPage.propTypes = {\r\n  data: PropTypes.object.isRequired\r\n};\r\n\r\nexport const pageQuery = graphql`\r\n  query {\r\n    postgres {\r\n      allImageBoosts(orderBy: PAID_DESC) {\r\n        nodes {\r\n          uuid\r\n          paid\r\n          imageResultByImageResultId {\r\n            created\r\n            imageRequestByImageRequestId {\r\n              prompt\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    allFile {\r\n      nodes {\r\n        relativePath\r\n        childImageSharp {\r\n          gatsbyImageData(layout: CONSTRAINED, width: 128)\r\n        }\r\n      }\r\n    }\r\n  }\r\n`;\r\n","module.exports = {\r\n  getImageUrl: (node) => `/image/${node.uuid}`\r\n};\r\n"],"names":["_excluded","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","_ref","ref","as","bsPrefix","variant","size","active","className","props","prefix","_useButtonProps","tagName","_useButtonProps2","buttonProps","Component","concat","href","disabled","displayName","defaultProps","ImagesPage","data","postgres","allImageBoosts","nodes","boosts","allFile","images","filteredBoosts","boost","Boolean","paid","title","description","Container","Row","Col","xs","Table","striped","map","G","image","uuid","getImage","find","relativePath","childImageSharp","gatsbyImageData","imageResultByImageResultId","imageRequestByImageRequestId","prompt","formatDistanceToNow","parseISO","created","addSuffix","Link","to","getImageUrl","colSpan","propTypes","PropTypes","module","exports","node"],"sourceRoot":""}